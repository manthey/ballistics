(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"0511":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"mainpage"}},[r("vue-markdown",[e._v("\n# Ballistics of Historical Black Powder Tests\n\nThis attempts to answer the question of how black powder has varied over time.  The main technique is to gather historical test data and use modern external ballistics to calculate the usefully generated power per unit weight of the gunpowder used in each test.\n\nThe main focus is on the 18th century.  One question in particular is how the black powder we purchase today compares with the powder that was produced commercially in the 18th century.\n\nThe scope of this research is focused on black powder as a relatively mature technology when it was when it was a ubiquitous and required substance.\n\n## Gunpowder\n\nGunpowder was a critical necessity in warfare, hunting, and mining.  There are numerous histories on the early developments of gunpowder and on its ultimate decline and replacement.  Despite this, there has not been a general history of gunpowder in the age of scientific sieges and lineal field battles.  This oversight is, at least in part, due to the perceived lack of substantial technological development of gunpowder.\n\nGunpowder in the 17th through 19th centuries was a manufactured commodity.  The users of gunpowder generally did not need to know the specifics of how it was made.  As there were virtually no alternatives to gunpowder, there was little need to know how it compared to other substances.  This prevented much general curiosity about gunpowder, which, in turn, limited the number of scientists and engineers who worked to improve the product.\n\nDespite this, gunpowder manufacturing evolved significantly.  Not all of the changes made a better product, as many innovations were for safety or cost reduction.  Similarly, what constitutes improved gunpowder depends on the goals -- some changes were to improve the strength of the powder, while others were done to improve the life-span of the substance.\n\nAt the end of the 18th century, chemistry was undergoing a revolution, and the scientific method was being more widely used.  Gunpowder was examined anew, resulting in many publications and several attempts at improvement.  Some of these improvements resulted in inflated, preposterous claims, while others were quite useful.  Although the tools for quantifying these improvements existed, they would not be fully employed until the middle of the 19th century.\n\nMost histories of gunpowder begin with its original discovery and origin.  There are different opinions about the first country to use gunpowder.  It is not a new observation, but in order to determine where and when gunpowder was invented, the exact substance that constitutes gunpowder must be specified.  It can be claimed that gunpowder is any substance that deflagrates and contains a nitrate.  At the other extreme, gunpowder is a specific ratio of saltpeter, charcoal, and sulfur, intimately ground so as to have some minimum combustion speed, and formed into grains.  Possibly the most sensible definition of gunpowder would be that it is any powdered composition that can be used to fire a projectile from a gun.\n\nFor purposes of this study, gunpowder is the commercial product made from saltpeter, sulfur, charcoal, and minor other components, as sold to and used by the military and civilians for artillery, small arms, and mining.  The early history of gunpowder is not covered.  Furthermore, this study is biased towards English and French gunpowder, with some additional information on the manufacture of gunpowder by other European nations and in America.\n\nToday gunpowder is more commonly referred to as black powder.  This distinction is made to separate the original gunpowder from newer propellants used to fire guns.  The term gunpowder will be used to always mean black powder and its direct variations.\n\nGunpowder was the only commercial explosive of any significance until the mid 19th century.  As such, it was called on to fill a number of uses.  The three principal uses were military service, sporting, and blasting.  Military service used gunpowder for ordnance, for small arms, for grenades and other specialty weapons, and for mines.  Sporting comprised recreational and subsistence hunting as well as target shooting.  Blasting included civil engineering and both open pit mining and deep shaft mining.\n\nDepending on the principal use of gunpowder, different properties are desirable.  For service powder, the greatest possible strength is sought, thus minimizing the amount of materiel that requires transport.  For sporting powder, the most certain and quick inflammation is requisite, to minimize the delay between pulling the trigger and the gun firing at the target.  For blasting powder, the greatest quantity of expanding gas is desired, to maximize the shock to the surrounding rocks and earth. [Berthelot, 1892, p. 477](references?refkey=berthelot1892)\n\nIt is also desirable for most gunpowder to also be resistant to moisture.  The powder should have a minimum of degradation due to age and transportation.  Lastly, the gunpowder needs to be inexpensive for the customer, yet profitable for the manufacturer.\n\nSince there are different goals for different uses of gunpowder, manufacturers usually produced multiple types of powder.  Besides the basic composition of the powder, the granulation size was varied to better match specific uses of the gunpowder.  In addition to the three main applications of gunpowder listed above, specialty powder was made for fireworks and for certain foreign trade.  Multiply qualities of gunpowder were also manufactured and sold to accommodate different budgets.\n\nToday, most uses of gunpowder have been superceded by modern explosives, though gunpowder still has applications for military service, sporting, and blasting.  Gunpowder manufacturers still produce multiple grades, granulations, and qualities of gunpowder.\n\n## Data Sources\n\nIn an effort to characterize the quality of gunpowder over time, a variety of historical sources have been used.  Any source where there is an experiment with enough information to calculate the realized power per weight of gunpowder could be used.  This includes range tests, calorimeter measurements, velocities measured with ballistic pendulums and chronometers, trajectory tracks, time of flight, and other methods.  Some proof standards and textbook problems have also been used, though these are of limited value.\n\nCurrently, ballistics calculations are limited to spherical projectiles, as drag models for other shapes are substantially more complicated.  Where available, information such as temperature, pressure, and humidity are used to refine computations.  Ideally, one would use the smoothness and sphericity of the projectile as well, but this is essentially never recorded.\n\nThere are certainly more sources than have been used; please forward references when possible.\n    ")])],1)},i=[],a={name:"MainPage"},o=a,s=(r("4b4c"),r("2877")),l=Object(s["a"])(o,n,i,!1,null,"3083080e",null);t["a"]=l.exports},"06be":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"tablewithcontrols"}},[r("PlotControls",{attrs:{filter:e.currentFilter,pointkey:e.currentPoint,isTable:!0},on:{filterupdate:e.filterUpdate,pointkeyupdate:e.pointkeyUpdate,toggleplottable:e.showPlot}}),r("BallisticsTable",{attrs:{id:"display",plotdata:e.plotdata,filter:e.currentFilter,pointkey:e.currentPoint},on:{pointkeyupdate:e.pointkeyUpdate}})],1)},i=[],a=r("5176"),o=r.n(a),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table_wrapper"},[r("div",{staticClass:"table_scroll"},[r("table",{ref:"dataTable",staticClass:"data-table"},[r("thead",[r("tr",e._l(e.columns,function(t){return r("th",{key:"datacol-"+t.key,class:t.key===e.sortOrder[e.sortOrder.length-1].prop?"descending"===e.sortOrder[e.sortOrder.length-1].order?"descending":"ascending":"",attrs:{column:t.key},on:{click:e.sortTable}},[r("span",[e._v(e._s(t.key.replace(/_/g," ")))]),e._m(0,!0)])}),0)]),r("tbody",{domProps:{innerHTML:e._s(e.rowHtml())},on:{click:e.clickRow}})])])])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"caret-wrapper"},[r("i",{staticClass:"sort-caret descending"}),r("i",{staticClass:"sort-caret ascending"})])}],c=r("6f23"),u=r("d9a6"),h={name:"BallisticsTable",props:{plotdata:Array,parameters:Object,filter:String,pointkey:String},data:function(){return{parameterList:c["a"],scrolled:!1,sortOrder:[{prop:"pointkey"}]}},computed:{dataList:function(){var e=this.plotdata||[];if(this.filter)try{var t=Function("d",'"use strict";return('+this.filter+")");e=e.filter(t)}catch(r){console.error("Filter failed: "+this.filter),console.error(r)}return e},columns:function(){var e=this.dataList,t=this.parameterList.filter(function(t){return e.some(function(e){return e[t.key]})});return t},sortedDataList:function(){return c["d"](this.dataList,this.sortOrder)}},methods:{clickRow:function(e){var t=e.target.closest("tr"),r=t.getAttribute("pointkey");this.$emit("pointkeyupdate",{pointkey:r})},rowHtml:function(){var e=this.columns,t=this.pointkey,r=this.sortedDataList.map(function(r){return'<tr pointkey="'+r.pointkey+'"'+(r.pointkey===t?' class="current-row"':"")+">"+e.map(function(e){var t=r["_"+e.key]||r[e.key];return t=void 0===t?"":"string"===typeof t?Object(u["escape"])(t):""+t,"<td>"+t+"</td>"}).join("")+"</tr>"}).join("");return r},scrollIfNeeded:function(){if(this.pointkey&&this.scrolled!==this.plotdata.length){var e=document.querySelector(".data-table .current-row");e&&(e.scrollIntoView(),e.closest(".table_wrapper").scrollTop-=(e.closest(".table_wrapper").clientHeight-e.clientHeight)/2,this.scrolled=this.plotdata.length)}},sortTable:function(e){var t=e.target.closest("[column]").getAttribute("column"),r=this.sortOrder[this.sortOrder.length-1],n="ascending";r.prop===t&&("descending"===r.order?t=null:n="descending"),null===t?this.sortOrder=[{prop:"pointkey"}]:(this.sortOrder=this.sortOrder.filter(function(e){return e.prop!==t}),this.sortOrder.push({prop:t,order:n}))}},mounted:function(){this.$nextTick(this.scrollIfNeeded)},updated:function(){this.scrollIfNeeded()}},d=h,p=(r("be19"),r("b24c"),r("db50"),r("2877")),f=Object(p["a"])(d,s,l,!1,null,"dc69c14a",null),m=f.exports,y=r("df79"),g={name:"TableWithControls",components:{BallisticsTable:m,PlotControls:y["a"]},props:{filter:String,plotdata:Array,pointkey:String,references:Object},data:function(){return{currentFilter:this.filter,currentPoint:this.pointkey}},methods:{filterUpdate:function(e){this.currentFilter=e.filter;var t=this.$router.currentRoute;this.$router.push({path:t.path,query:o()({},t.query,{filter:e.filter})})},pointkeyUpdate:function(e){var t=e.pointkey;this.currentPoint=t;var r=this.$router.currentRoute;this.$router.push({path:r.path,query:o()({},r.query,{pointkey:t})})},showPlot:function(){var e=this.$router.currentRoute;this.$router.push({path:"/plot",query:o()({},e.query)})}},watch:{$route:function(e){this.currentFilter=e.query.filter,this.currentPoint=e.query.pointkey}}},_=g,v=(r("26ed"),Object(p["a"])(_,n,i,!1,null,"0eb04de7",null));t["a"]=v.exports},"0c87":function(e,t,r){"use strict";var n=r("b256"),i=r.n(n);i.a},1:function(e,t){},"16c0":function(e,t,r){"use strict";var n=r("ff98"),i=r.n(n);i.a},1774:function(e,t,r){"use strict";var n=r("4465"),i=r.n(n);i.a},2:function(e,t){},2034:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"cssmenu"},[r("ul",[r("li",[r("router-link",{attrs:{to:{path:"main"}}},[e._v("Home")])],1),r("li",[r("router-link",{attrs:{to:{path:"plot"}}},[e._v("Plot")]),r("ul",e._l(e.plots,function(t,n){return r("li",{key:"plotmenu"+n},[r("router-link",{attrs:{to:{path:t.path,query:t.query},title:t.tooltip}},[e._v(e._s(t.text))])],1)}),0)],1),r("li",[r("router-link",{attrs:{to:{path:"table"}}},[e._v("Table")]),r("ul",e._l(e.tables,function(t,n){return r("li",{key:"tablemenu"+n},[r("router-link",{attrs:{to:{path:t.path,query:t.query},title:t.tooltip}},[e._v(e._s(t.text))])],1)}),0)],1),r("li",[r("router-link",{attrs:{to:{path:"computation"}}},[e._v("Computation")])],1),r("li",[r("router-link",{attrs:{to:{path:"references"}}},[e._v("References")])],1)])]),r("router-view",{staticClass:"view",attrs:{plotdata:e.plotdata,references:e.references,parameters:e.parameters}})],1)},a=[],o=r("d122"),s=o["a"],l=(r("d6a8"),r("b42f"),r("2877")),c=Object(l["a"])(s,i,a,!1,null,"b13f4014",null),u=c.exports;n["a"].config.productionTip=!1,window.app=new n["a"]({render:function(e){return e(u)}}).$mount("#app")},"26ed":function(e,t,r){"use strict";var n=r("b9cb"),i=r.n(n);i.a},"29ef":function(e,t,r){},"2e89":function(e,t,r){},3978:function(e,t,r){"use strict";var n=r("79ab"),i=r.n(n);i.a},4465:function(e,t,r){},"4b4c":function(e,t,r){"use strict";var n=r("8ffc"),i=r.n(n);i.a},"514f":function(e,t,r){},5713:function(e,t,r){},"5b10":function(e,t,r){"use strict";var n=r("cfed"),i=r.n(n);i.a},"61bf":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"computation"}},[r("vue-markdown",[e._v("\n# Ballistics Computation\n\n## Program\n\nThere is a Python program to calculate the trajectory of a sphere, taking into account atmospheric and wave drag.  Given a set of known factors, this calculates an unknown parameter, usually the power density of the gunpowder used.\n\nSee the [GitHub repository](https://github.com/manthey/ballistics) for the source code and requirements for the program.\n\n## Basic Algorithm\n    ")]),e._m(0),r("vue-markdown",[e._v("\nThe basic premise is simple: knowing the mass of the powder charge and the power density of the powder, we know how much energy is imparted to a projectile of a known mass and diameter.  This starts the projectile moving at a specific initial velocity and at a specified elevation angle.\n\nThe program then steps through time in small increments, and, for each point calculates the atmospheric and wave drag and the acceleration of gravity (see figure [Stone, 1758, p. 148](#/references?refkey=stone1758)).  This changes the projectiles velocity.  The calculation steps continue until the projectile reaches an expected destination (usually hitting the ground).\n\nThe process by which the projectile gains the initial velocity is called interior ballistics, and is not covered by this program.  This means that all of the factors of friction, windage, wadding, powder chamber shape, touch-hole size, bore length, and other gun tube parameters are lumped into a single \"power factor\" fr the gunpowder.\n\nEach of the major points within the calculation is discussed below:\n\n## Numerical Methods\n\nThe [Runge-Kutta method](http://mathworld.wolfram.com/Runge-KuttaMethod.html) is used to calculate the trajectory.  It would be simpler to calculate the acceleration at each point and just adjust the velocity based on this acceleration, and then the position based on the velocity.  By using the Runge-Kutta method, changes in acceleration are handled more accurately.  While each computation step is slower than the simple method, many fewer steps are necessary to get the same accuracy of results.\n\nFor any given position, the acceleration is calculated based on the position, velocity, atmospheric conditions, and other factors (see below for details).  This can be expressed as a function yielding the ordered pair:\n\n$\\left(a_{x_i}, a_{y_i}\\right) = f\\left(x_i, y_i, v_{x_i}, v_{y_i}\\right)$\n\nThe simple method calculates each step using the equations:\n\n$x_{i+1} = x_i + v_{x_i} \\Delta t$        $y_{i+1} = y_i + v_{y_i} \\Delta t$        $v_{x_{i+1}} = v_{x_i} + a_{x_i} \\Delta t$        $v_{y_{i+1}} = v_{y_i} + a_{y_i} \\Delta t$\n\nwhere $\\Delta t$ is the time step, $x_i$ and $y_i$ are the current position, $v_{x_i}$ and $v_{y_i}$ are the current velocity, and $a_{x_i}$ and $a_{y_i}$ are the current acceleration.\n\nThe Runge-Kutta method can be expressed many different ways.  The program uses the following set of equations:\n\n$\\Delta x_{i_1} = v_{x_i} \\Delta t$        $\\Delta y_{i_1} = v_{y_i} \\Delta t$        $\\Delta v_{x_{i_1}} = a_{x_i} \\Delta t$        $\\Delta v_{y_{i_1}} = a_{y_i} \\Delta t$\n$\\left(a_{x_{i_1}}, a_{y_{i_1}}\\right) = f\\left(x_i+\\dfrac{\\Delta x_{i_1}}{2}, y_i+\\dfrac{\\Delta y_{i_1}}{2}, v_{x_i}+\\dfrac{\\Delta v_{x_{i_1}}}{2}, v_{y_i}+\\dfrac{\\Delta v_{y_{i_1}}}{2}\\right)$\n$\\Delta x_{i_2} = \\left(v_{x_i}+\\dfrac{\\Delta v_{x_{i_1}}}{2}\\right) \\Delta t$        $\\Delta y_{i_2} = \\left(v_{y_i}+\\dfrac{\\Delta v_{y_{i_1}}}{2}\\right) \\Delta t$        $\\Delta v_{x_{i_2}} = a_{x_{i_1}} \\Delta t$        $\\Delta v_{y_{i_2}} = a_{y_{i_1}} \\Delta t$\n$\\left(a_{x_{i_2}}, a_{y_{i_2}}\\right) = f\\left(x_i+\\dfrac{\\Delta x_{i_2}}{2}, y_i+\\dfrac{\\Delta y_{i_2}}{2}, v_{x_i}+\\dfrac{\\Delta v_{x_{i_2}}}{2}, v_{y_i}+\\dfrac{\\Delta v_{y_{i_2}}}{2}\\right)$\n$\\Delta x_{i_3} = \\left(v_{x_i}+\\dfrac{\\Delta v_{x_{i_2}}}{2}\\right) \\Delta t$        $\\Delta y_{i_3} = \\left(v_{y_i}+\\dfrac{\\Delta v_{y_{i_2}}}{2}\\right) \\Delta t$        $\\Delta v_{x_{i_3}} = a_{x_{i_2}} \\Delta t$        $\\Delta v_{y_{i_3}} = a_{y_{i_2}} \\Delta t$\n$\\left(a_{x_{i_3}}, a_{y_{i_3}}\\right) = f\\left(x_i+\\Delta x_{i_3}, y_i+\\Delta y_{i_3}, v_{x_i}+\\Delta v_{x_{i_3}}, v_{y_i}+\\Delta v_{y_{i_3}}\\right)$\n$\\Delta x_{i_4} = \\left(v_{x_i}+\\Delta v_{x_{i_3}}\\right) \\Delta t$        $\\Delta y_{i_4} = \\left(v_{y_i}+\\Delta v_{y_{i_3}}\\right) \\Delta t$        $\\Delta v_{x_{i_4}} = a_{x_{i_3}} \\Delta t$        $\\Delta v_{y_{i_4}} = a_{y_{i_4}} \\Delta t$\n$x_{i+1} = x_i + \\dfrac{\\Delta x_{i_1} + 2\\Delta x_{i_2} + 2\\Delta x_{i_3} + \\Delta x_{i_4}}{6}$        $v_{x_{i+1}} = v_{x_i} + \\dfrac{\\Delta v_{x_{i_1}} + 2\\Delta v_{x_{i_2}} + 2\\Delta v_{x_{i_3}} + \\Delta v_{x_{i_4}}}{6}$\n$y_{i+1} = y_i + \\dfrac{\\Delta y_{i_1} + 2\\Delta y_{i_2} + 2\\Delta y_{i_3} + \\Delta y_{i_4}}{6}$        $v_{y_{i+1}} = v_{y_i} + \\dfrac{\\Delta v_{y_{i_1}} + 2\\Delta v_{y_{i_2}} + 2\\Delta v_{y_{i_3}} + \\Delta v_{y_{i_4}}}{6}$\n\nIn general, a time step of 10 to 50 milliseconds was used for most results.  Here is a calculation using some data from [1742](#/plot?filter=d.key%3D%3D'report1742'&pointkey=report1742-0).  The power density of the powder is computed using both the Runge-Kutta and the simple method, each using a time step ranging from 1 s down to 0.1 ms for the Runge-Kutta method and down to 0.002 ms for the simple method.\n\nThe following table shows the power density that was calculated, along with the time it took for a computer to make the calculations.\n\nNumerical Method | Time Step (s) | Power per Mass (J/kg) | Computation Time (s)\n--- | --- | --- | ---\nRunge-Kutta | 1 | 407884.610 | 11.6\nRunge-Kutta | 0.5 | 407885.507 | 22.2\nRunge-Kutta | 0.2 | 407879.215 | 5.4\nRunge-Kutta | 0.1 | 407884.610 | 10.2\nRunge-Kutta | 0.05 | 407885.507 | 20.0\nRunge-Kutta | 0.02 | 407885.587 | 50.9\nRunge-Kutta | 0.01 | 407885.593 | 101.2\nRunge-Kutta | 0.005 | 407885.593 | 200.4\nRunge-Kutta | 0.002 | 407885.594 | 499.8\nRunge-Kutta | 0.001 | 407885.594 | 1009.5\nRunge-Kutta | 0.0005 | 407885.594 | 1917.8\nRunge-Kutta | 0.0002 | 407885.594 | 3710.2\nRunge-Kutta | 0.0001 | 407885.594 | 5070.4\nSimple | 1 | 401947.038 | 2.9\nSimple | 0.5 | 404905.932 | 5.9\nSimple | 0.2 | 396087.585 | 1.3\nSimple | 0.1 | 401947.038 | 2.6\nSimple | 0.05 | 404905.932 | 5.4\nSimple | 0.02 | 406691.212 | 13.1\nSimple | 0.01 | 407287.984 | 26.5\nSimple | 0.005 | 407586.683 | 52.2\nSimple | 0.002 | 407766.004 | 132.7\nSimple | 0.001 | 407825.795 | 255.7\nSimple | 0.0005 | 407855.693 | 519.2\nSimple | 0.0002 | 407873.633 | 1297.1\nSimple | 0.0001 | 407879.613 | 2270.5\nSimple | 5e-05 | 407882.603 | 3678.8\nSimple | 2e-05 | 407884.398 | 5654.9\nSimple | 1e-05 | 407884.996 | 7940.7\nSimple | 5e-06 | 407885.295 | 11496.1\nSimple | 2e-06 | 407885.474 | 19759.8\nSimple | 1e-06 | 407885.534 | 25950.3\n\n\nAs can be seen, even though the Runge-Kutta technique takes around 4 times as long as the simple technique to make the same number of calculations, it converges on the answer with a much smaller time step.  With the precision of the original data sources and the variation based on environmental assumptions and drag calculations, anything more than a few decimal places is irrelevant.  A time step of 20 ms is more than sufficient to get a stable answer using Runge-Kutta, whereas a time step of 0.005 ms was required with the simple technique.  The Runge-Kutta technique is some 1000 times faster than the simple technique for this particular case.\n\nA time step of 50 ms was sufficient for six digits of precision with this sample.\n\n## Determining Different Unknowns\n\nMostly, historical data is used to calculate the power density of gunpowder.  The program is capable of solving for a variety of unknown values.  For example, if the power factor is known, the range can be determined.  For most values, the program works by using an initial very-low estimate and an initial very-high estimate.  This produces results that fall short and go long of some expected result.\n\nFor instance, we often know the powder charge, projectile weight, projectile diameter, angle of shot, and range of the shot.  By estimating a low power density, the calculated range will fall short, and with a high power density, the range will be too great.  A weighted binary search is used to determine the power density that produces the actual range that was given in the original data.\n\nFor some unknowns, such as elevation angle, there may be more than one solution.  In this case, instead of just using a low and high initial value, a set of initial values is stepped through, until two values are found that bracket the expected result.  From that point, the same weighted binary search is used to find the precise answer.\n\n## Forces\n\nAt each point, the calculation of the trajectory is dependent on the force on the projectile.  Rather than use force directly, the acceleration is calculated.  This is divided into two main factors: the acceleration due to gravity and the acceleration due to atmospheric drag including wave effects.\n\n### Acceleration from Gravity\n\nThe program uses a very simple model of gravity.  Taking the NIST value for the standard acceleration of gravity, this acceleration is adjusted by the altitude above sea level.  The radius of the earth is taken as the mean radius as defined in WGS-84.  This is a simplification; one could know the surface gravity at the location of interest, and the resultant vector isnÎé÷ecessarily straight down.  Similarly, the mean radius of the earth is not the same as the actual distance from its center.\n\nIt is felt that these assumptions are small in comparison to other errors in the calculations.\n\nIt is also noted that no correction has been made for the curvature of the earth.\n\nThe equation used is:\n\n$a_g = g_0 \\left(\\dfrac{r_\\text{earth}}{r_\\text{earth}+y}\\right)^2$\n\nwhere $g_0 = -9.80655 \\text{ m}/\\text{s}^2$, $r_\\text{earth} = 6371009 \\text{ m}$, and $y$ is the altitude in meters above mean sea level.\n\n### Acceleration from Drag\n\nThe acceleration from drag is expressed as $a_D = \\dfrac{\\frac{1}{2} C_D \\rho v^2 A}{m}$, where $C_D$ is the coefficient of drag, $\\rho$ is the atmospheric density, $v$ is the magnitude of velocity of the projectile, $A$ is the cross-section area of the projectile, and $m$ is the mass of the projectile.  The velocity and mass are straightforward.  The area is simply $A = \\pi r^2$ or $A = \\frac{1}{4}\\pi d^2$ where $r$ is the radius of the projectile and $d$ is the diameter.  The coefficient of drag and the density of the atmosphere are more complicated, and are detailed below.\n\nThe acceleration always acts contrary to the direction of motion.\n\n#### Coefficient of Drag\n\nOne of the factors in the ballistics analysis is the aerodynamic drag on a cannonball or bullet. In the modern formulation of drag, this factor is treated as a function of the Reynolds Number, the Mach Number, and the surface roughness of the projectile.\n\nSomewhat surprisingly, despite an early focus on drag on spherical projectiles, there doesn't appear to be a succinct summary of these factors and the expected accuracy. Rather, many fluid dynamics text books present a beautifully smooth curve that are solely based on the Reynolds Number.  Others show alternate curves for different surface roughness, or for different Mach numbers.  No single source that combines all three factors has been located.\n    ")]),r("figure",[r("img",{attrs:{src:"coefofdrag.gif"}}),r("figcaption",[r("vue-markdown",[e._v("\nVarious graphs used for the Coefficient of Drag as a function of the Reynolds and Mach Numbers. The two one the left are from [Munson](#/references?refkey=munson1988). The two on the right are from [Miller and Bailey](#/references?refkey=miller1979).\n        ")])],1)]),r("vue-markdown",[e._v("\nFurthermore, most graphs only show data for different Mach numbers for a very limited range of Reynolds numbers.  Sometimes formulas are given to try to separated air resistance based on the Reynolds number from wave drag based on the Mach number.\n\nThere is one reference that has data for both Reynolds number and Mach number in the range that is of primary interest in.  This is a paper by [Miller and Bailey](#/references?refkey=miller1979) from 1979.  Their graphs cover the range from a Reynolds number of 1e4 to 1e7 and Mach numbers from 0 to 3.0.  While this includes most of the range of actual data, when projectiles are travelling slowly, the Reynolds Number is less than 1e4, and, for some cases, the initial velocity is greater than Mach 3.  This data was supplemented with data from a standard text on fluid mechanics ([Munson, 1998, pp. 600, 709](#/references?refkey=munson1988)).\n\nSelected points were digitized from each of these graphs.  From these points, the ballistic program interpolates the coefficient of drag.  Several interpolation methods were tried, such a natural cubic splines.  However, due to the nature of the drag curve (specifically, the sharp 'hook' in the graph), a tensioned hermitic spline yielded the best results for interpolating based on Reynolds number along a Mach number curve.  A linear interpolation is used between Mach number curves.\n\nBecause the available data on the effect of surface roughness is very poor, no attempt has been made to model it.  In general, the projectiles used are relatively smooth.  Any roughness they have tends to be irregular.  Often the roughness is not reported, though sometimes adjectives such as \"smooth\" are used.  It is probably that excluding roughness effects introduces less error than trying to include them.\n\nIn comparing different drag models, the results differ by a few percent for the first three.  Henderson differs much more greatly.  There is enough variation in other environmental effects, that it is difficult to determine which model is most accurate.  The following table uses a test from [1742](#/plot?filter=d.key%3D%3D'report1742'&pointkey=report1742-0).  Miller has been used in all other calculations.\n\nDrag Method | Power per Mass (J/kg)\n--- | ---\n[Miller](#/references?refkey=miller1979) | 407885\n[Morrison](#/references?refkey=morrison2013) | 406070\n[Collins](#/references?refkey=collins2016) | 410184\n[Henderson](#/references?refkey=henderson1976) | 434153\n\n#### Reynolds Number\n\nThe Reynolds number is a unitless factor computed as $Re = \\dfrac{\\rho v L}{\\mu}$, where $\\rho$ is the density of the fluid the projectile is travelling through, $v$ is the magnitude of the velocity of the projectile, $L$ is the characteristic length, and $\\mu$ is the dynamic viscosity of the fluid.  For a sphere, $L$ is the diameter of the sphere, $d$.  The density is the same as the atmospheric density used in computing the acceleration based on the coefficient of drag.\n\nFormulae are used to take into account the effect of relative humidity on both atmospheric density and atmospheric viscosity.\n\nFor atmospheric density, the formulas are taken from Picard, et al. in [CIPM-2007](#/references?refkey=cipm2007).  This formula is dependent on temperature, relative humidity, and atmospheric pressure.  Unless explicitly specified, atmospheric pressure is computed based on the elevation above sea level using the formula presented in [Munson, 1998, p. 51](#/references?refkey=munson1988).\n\nFor atmospheric viscosity, the viscosity of dry air is combined with the viscosity of water vapor using a simple equation presented in [Melling, et al., p. 1115](#/references?refkey=melling1997).  The equations in [Kayoda, Matsunaga, and Nagashima, p. 956](#/references?refkey=kayoda1985) are used to compute the viscosity of dry air at the current temperature and density.  The equations in [Sengers and Kamgar-Parsi, pp. 186-187](#/references?refkey=sengers1984) are used to compute the viscosity of water vapor at the current temperature and density .  The atmospheric viscosity is a function of just temperature, density, and relative humidity.\n\n#### Mach Number\n\nThe Mach Number is the magnitude of the velocity of the projectile divided by the speed of sound in the local atmosphere.  As with the atmospheric viscosity and atmospheric density, the speed of sound is affected by the relative humidity and the temperature.  The equations presented by [Bohn](#/references?refkey=bogn1988) are used, but the molar masses listed in [CIPM-2007, pp. 150-151](#/references?refkey=cipm2007) are preferred since they appear to be more authoritative.\n\n## Environmental Effects\n\nMost historic tests do not record atmospheric conditions, such as temperature, pressure, or humidity.  Using a test from [1742](#/plot?filter=d.key%3D%3D'report1742'&pointkey=report1742-0), here are the variations of the computed power factor based on some environmental effects:\n\nTemperature (°C) | Power per Mass (J/kg)\n--- | ---\n-30 °C | 411997\n-20 °C | 410336\n-10 °C | 409993\n0 °C | 408566\n10 °C | 407711\n20 °C | 406874\n30 °C | 406090\n40 °C | 405980\n\nAt warmer temperatures, a less powerful gunpowder can acheive the same range as a stronger powder at low temperatures.\n\nPressure (bar) | Power per Mass (J/kg)\n--- | ---\n0.83 | 404088\n0.9 | 405208\n0.98 | 406660\n1 | 407634\n1.05 | 407982\n\nUnsurprisingly, a weaker powder can obtain a longer range at low pressure.\n\nRelative Humidity (%) | Power per Mass (J/kg)\n--- | ---\n0% | 407287\n50% | 407273\n100% | 407258\n\nThe effects of humidty are small, but a ball is thrown mildly further in humid weather.\n    ")])],1)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("figure",[r("img",{attrs:{src:"accelfig.gif"}}),r("figcaption",[e._v("Acceleration on a Projectile")])])}],a={name:"Computation"},o=a,s=(r("1774"),r("7275"),r("2877")),l=Object(s["a"])(o,n,i,!1,null,"3e9d8e66",null);t["a"]=l.exports},"6a1d":function(e,t,r){},"6f23":function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"d",function(){return y}),r.d(t,"e",function(){return g}),r.d(t,"f",function(){return _});r("f559");var n=r("5176"),i=r.n(n),a=r("a4bb"),o=r.n(a),s=(r("ac6a"),r("55dd"),r("aabe")),l=r.n(s),c={_count:0,_maxcount:1e3},u={_count:0,_maxcount:1e3},h={precision:6,lowerExp:-6,upperExp:9},d=[{key:"ref",primary:!0},{key:"key",primary:!0},{key:"idx",title:"0-based location in the data file",primary:!0},{key:"desc",primary:!0},{key:"date",primary:!0},{key:"date_filled"},{key:"year"},{key:"technique",primary:!0},{key:"power_factor",units:"J/kg",primary:!0},{key:"given_date",primary:!0},{key:"given_date_note"},{key:"given_charge",primary:!0},{key:"given_charge_note"},{key:"charge_note"},{key:"given_diameter",primary:!0},{key:"given_diameter_note"},{key:"given_angle",primary:!0},{key:"given_angle_note"},{key:"given_range",primary:!0},{key:"given_range_note"},{key:"given_final_angle",primary:!0},{key:"given_final_height",primary:!0},{key:"given_final_height_note"},{key:"given_final_time",primary:!0},{key:"given_final_time_note"},{key:"given_final_velocity",primary:!0},{key:"given_atmospheric_density",primary:!0},{key:"given_atmospheric_density_note"},{key:"given_group",primary:!0},{key:"given_temperature",primary:!0},{key:"given_temperature_note"},{key:"given_humidity",primary:!0},{key:"given_humidity_note"},{key:"given_wetbulb",primary:!0},{key:"given_initial_height",primary:!0},{key:"given_initial_height_note"},{key:"given_initial_velocity",primary:!0},{key:"given_initial_velocity_note"},{key:"given_mass",primary:!0},{key:"given_mass_note"},{key:"given_material",primary:!0},{key:"given_material_note"},{key:"given_material_density",primary:!0},{key:"given_maxheight",primary:!0},{key:"given_maxheight_note"},{key:"given_power",primary:!0},{key:"given_pressure",primary:!0},{key:"given_rising_height",primary:!0},{key:"given_technique",primary:!0},{key:"given_technique_note"},{key:"charge",units:"kg",primary:!0},{key:"diam",units:"m",primary:!0},{key:"range",units:"m",primary:!0},{key:"final_angle",units:"deg",primary:!0},{key:"final_height",units:"m",primary:!0},{key:"final_time",units:"s",primary:!0},{key:"final_velocity",units:"m/s",primary:!0},{key:"atmospheric_density",units:"kg/m^3",primary:!0},{key:"rh",primary:!0},{key:"initial_height",units:"m",primary:!0},{key:"initial_velocity",units:"m/s",primary:!0},{key:"mass",units:"kg",primary:!0},{key:"material",primary:!0},{key:"material_density",units:"kg/m^3",primary:!0},{key:"projectile_density",units:"kg/m^3",primary:!0},{key:"max_height",units:"m",primary:!0},{key:"pressure",units:"Pa",primary:!0},{key:"pressure_y0",units:"m",primary:!0},{key:"rising_height",units:"m",primary:!0},{key:"computation_time",units:"s"},{key:"initial_angle",units:"deg"},{key:"T",title:"Air temperature",units:"K"},{key:"Twb",title:"Wet-bulb temperature",units:"K"},{key:"time",units:"s"},{key:"x",units:"m"},{key:"y",units:"m"},{key:"vx",units:"m/s"},{key:"vy",units:"m/s"},{key:"ax",units:"m/s^2"},{key:"ay",units:"m/s^2"},{key:"final_density_density",units:"kg/m^3"},{key:"final_density_h",title:"final density humidity (0-1)"},{key:"final_density_pressure",units:"Pa"},{key:"final_density_psv",title:"Vapor pressure at saturation",units:"Pa"},{key:"final_density_T",units:"K"},{key:"final_density_xv"},{key:"final_density_y",units:"m"},{key:"final_drag_cd"},{key:"final_drag_Mn"},{key:"final_drag_Re"},{key:"final_drag_critical_Re"},{key:"final_drag_sos",units:"m/s"},{key:"final_drag_in_range"},{key:"final_viscosity_mua",title:"Viscosity of dry air",units:"kg/m/s"},{key:"final_viscosity_muv",title:"Viscosity of water vapor",units:"kg/m/s"},{key:"final_viscosity_viscosity",title:"Viscosity",units:"kg/m/s"},{key:"time_delta",units:"s"}],p={};d.forEach(function(e,t){e.idx=t,p[e.key]=e});var f={};function m(e,t){var r,n=t.key||"none";return n in u&&e in u[n]?u[n][e]:(r=isNaN(+e)?e:t&&t.units?l.a.unit(+e,t.units).format(h):l.a.format(+e,h),u._count>u._maxcount&&(u={_count:0,_maxcount:u._maxcount}),n in u||(u[n]={}),u[n][e]=r,u._count+=1,r)}function y(e,t){var r=e.slice().sort(function(e,r){var n,i,a,o;for(n=t.length-1;n>=0;n--){if(a=t[n].prop,o="descending"!==t[n].order,"pointkey"===a)return o?e.key>r.key?1:e.key<r.key?-1:e.idx-r.idx:e.key>r.key?-1:e.key<r.key?1:r.idx-e.idx;if(e[a]!==r[a]){if(void 0===e[a])return o?-1:1;if(void 0===r[a])return o?1:-1;var s=+e[a],l=+r[a];if(!isNaN(s)&&!isNaN(l)){if(s===l)continue;return o?s-l:l-s}var u=""+e[a],h=""+r[a];if(u!==h&&(u in c&&h in c[u]?i=c[u][h]:(i=u.localeCompare(h,void 0,{ignorePunctuation:!0}),c._count>c._maxcount&&(c={_count:0,_maxcount:c._maxcount}),u in c||(c[u]={}),c[u][h]=i,c._count+=1),i))return o?i:-i}}return 0});return r.forEach(function(e,t){e.rowidx=t}),r}function g(e){return o()(p).forEach(function(t){e[t]||console.log("The client Parameters include ".concat(t,", but it is missing in the data."))}),o()(e).forEach(function(t){p[t]||(console.log("The data parameters include ".concat(t,", but it is missing in the client.")),p[t]={key:t},d.push(p[t])),i()(p[t],e[t])}),p}function _(e){return e.forEach(function(e){var t=e.key+"-"+e.idx;o()(e).forEach(function(t){if(!t.startsWith("_")){var r=m(e[t],p[t]);r!==e[t]&&(e["_"+t]=r)}}),f[t]=e,e.pointkey=t}),f}},7275:function(e,t,r){"use strict";var n=r("e46e"),i=r.n(n);i.a},"74c6":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table_wrapper"},[r("div",{staticClass:"table_scroll"},[r("table",{ref:"referenceTable",staticClass:"reference-table"},[r("thead",[r("tr",e._l(e.columns,function(t){return r("th",{key:"datacol-"+t.key,class:t.key===e.sortOrder[e.sortOrder.length-1].prop?"descending"===e.sortOrder[e.sortOrder.length-1].order?"descending":"ascending":"",attrs:{column:t.key,width:t.width||""},on:{click:e.sortTable}},[r("span",[e._v(e._s(t.title))]),t.sort?r("span",{staticClass:"caret-wrapper"},[r("i",{staticClass:"sort-caret descending"}),r("i",{staticClass:"sort-caret ascending"})]):e._e()])}),0)]),r("tbody",{on:{click:e.clickRow}},[e._l(e.sortedReferenceList,function(t){return[r("tr",{key:"refrow-"+t.key,class:t.key===e.refkey?"current-row":"",attrs:{refkey:t.key}},[r("td",{class:t.details||t.link?"expand":"",on:{click:function(t){return t.stopPropagation(),e.toggleExpansion(t)}}},[r("span")]),r("td",[e._v(e._s(t.ref))]),r("td",{domProps:{innerHTML:e._s(t.cms)}}),r("td",[e._v(e._s(t.summary||""))]),r("td",{on:{click:function(e){e.stopPropagation()}}},[t._hasData?[r("router-link",{staticClass:"reference-link",attrs:{to:{path:"plot",query:{filter:"d.key==='"+t.key+"'"}}}},[e._v("Plot")]),e._v("\n                "+e._s(" ")+"\n                "),r("router-link",{staticClass:"reference-link",attrs:{to:{path:"table",query:{filter:"d.key==='"+t.key+"'"}}}},[e._v("Table")])]:e._e()],2)]),t.details||t.link?r("tr",{key:"refrowexp-"+t.key,staticClass:"expansion-row"},[r("td",{attrs:{colspan:"5"}},[t.details?r("p",{domProps:{innerHTML:e._s(t.details)}}):e._e(),t.link?r("p",[r("a",{attrs:{href:"row.link"}},[e._v(e._s(t.link))])]):e._e()])]):e._e()]})],2)])])])},i=[],a=r("5176"),o=r.n(a),s=r("a4bb"),l=r.n(s),c=(r("ac6a"),r("6f23")),u={name:"References",props:{parameters:Object,references:Object,refkey:String},data:function(){return{columns:[{key:"expand",title:"",width:"50px"},{key:"ref",title:"Short Reference",sort:!0,width:"200px"},{key:"cms",title:"CMS Reference",sort:!0},{key:"summary",title:"Summary",sort:!0},{key:"_hasData",title:"Data",width:"100px"}],scrolled:!1,sortOrder:[{prop:"ref"}]}},computed:{referenceList:function(){var e=this,t=[];return l()(this.references).forEach(function(r){var n=o()({},e.references[r]);e.parameters.key.values&&e.parameters.key.values[r]&&(n._hasData=!0),t.push(n)}),t},sortedReferenceList:function(){return c["d"](this.referenceList,this.sortOrder)}},methods:{clickRow:function(e){var t=e.target.closest("tr"),r=t.getAttribute("refkey"),n=this.$router.currentRoute;this.$router.push({path:"references",query:o()({},n.query,{refkey:r})})},sortTable:function(e){var t=e.target.closest("[column]").getAttribute("column"),r=this.sortOrder[this.sortOrder.length-1],n="ascending";r.prop===t&&("descending"===r.order?t=null:n="descending"),null===t?this.sortOrder=[{prop:"ref"}]:(this.sortOrder=this.sortOrder.filter(function(e){return e.prop!==t}),this.sortOrder.push({prop:t,order:n}))},scrollIfNeeded:function(){if(this.refkey&&this.scrolled!==l()(this.references).length){var e=document.querySelector(".reference-table .current-row");e&&(e.scrollIntoView(),e.closest(".table_wrapper").scrollTop-=(e.closest(".table_wrapper").clientHeight-e.clientHeight)/2,this.scrolled=l()(this.references).length)}},toggleExpansion:function(e){var t=e.target.closest("tr");t.classList.toggle("expanded")}},mounted:function(){this.$nextTick(this.scrollIfNeeded)},updated:function(){this.scrollIfNeeded()}},h=u,d=(r("c6ec"),r("97e5"),r("e9ed"),r("2877")),p=Object(d["a"])(h,n,i,!1,null,"6bb4cb3f",null);t["a"]=p.exports},"79ab":function(e,t,r){},"8ffc":function(e,t,r){},"97e5":function(e,t,r){"use strict";var n=r("514f"),i=r.n(n);i.a},"9bd9":function(e,t,r){},a956:function(e,t,r){},afc3:function(e,t,r){},b24c:function(e,t,r){"use strict";var n=r("bde4"),i=r.n(n);i.a},b256:function(e,t,r){},b42f:function(e,t,r){"use strict";var n=r("2e89"),i=r.n(n);i.a},b9cb:function(e,t,r){},bde4:function(e,t,r){},be19:function(e,t,r){"use strict";var n=r("5713"),i=r.n(n);i.a},c6ec:function(e,t,r){"use strict";var n=r("afc3"),i=r.n(n);i.a},cfed:function(e,t,r){},d122:function(e,t,r){"use strict";(function(e){r("ac6a");var n=r("5176"),i=r.n(n),a=(r("cadf"),r("551c"),r("f751"),r("097d"),r("2b0e")),o=r("9ce6"),s=r.n(o),l=r("8c4f"),c=r("6f23"),u=r("61bf"),h=r("0511"),d=r("f43e"),p=r("74c6"),f=r("06be");a["a"].use(l["a"]),a["a"].component("vue-markdown",s.a),t["a"]={name:"app",router:new l["a"]({base:e,routes:[{path:"/main",component:h["a"]},{path:"/computation",component:u["a"]},{path:"/plot",component:d["a"],props:function(e){return{filter:e.query.filter,pointkey:e.query.pointkey}}},{path:"/references",component:p["a"],props:function(e){return{refkey:e.query.refkey}}},{path:"/table",component:f["a"],props:function(e){return{filter:e.query.filter,pointkey:e.query.pointkey}}},{path:"*",redirect:"/main"}]}),data:function(){return{plotdata:[],references:{},parameters:c["b"],plots:[{index:"plot-full",text:"Full Data",path:"plot"},{index:"plot-preferred",text:"Preferred Experiments",tooltip:"Exclude theory, calorimeter, calculated, final_angle, and time techniques",path:"plot",query:{filter:"['time','theory','calorimeter','calculated','final_angle'].indexOf(d.technique)<0"}}],tables:[{index:"table-full",text:"Full Data",path:"table"},{index:"table-preferred",text:"Preferred Experiments",tooltip:"Exclude theory, calorimeter, calculated, final_angle, and time techniques",path:"table",query:{filter:"['time','theory','calorimeter','calculated','final_angle'].indexOf(d.technique)<0"}}]}},methods:{fetchData:function(){var e=this;fetch("totallist.json").then(function(e){return e.json()}).then(function(t){e.plotdata=t,c["f"](t)}).catch(function(e){throw e})},fetchReferences:function(){var e=this;fetch("references.json").then(function(e){return e.json()}).then(function(t){e.references=t}).catch(function(e){throw e})},fetchParameters:function(){var e=this;fetch("parameters.json").then(function(e){return e.json()}).then(function(t){e.parameters=i()({},c["e"](t))}).catch(function(e){throw e})},updateMenu:function(e){e=e||this.$router.currentRoute;var t,r,n=this.$children.filter(function(e){return"router-link"===e.$options._componentTag});if(e=i()({},e),"/"===e.path.substr(0,1)&&(e.path=e.path.substr(1)),n.forEach(function(n){void 0===t&&e===n.to&&(t=n),void 0===r&&e.path===n.to.path&&(r=n)}),t||r){var a=document.querySelector(".cssmenu .active");a&&a.classList.toggle("active"),(t||r).$el.parentElement.classList.toggle("active"),document.activeElement.blur()}}},mounted:function(){var e=this;this.fetchData(),this.fetchReferences(),this.fetchParameters(),this.$nextTick(this.updateMenu),window.addEventListener("click",function(t){var r=t.target;if(r&&r.matches("a:not([href*='://'])")&&r.href){var n=t.altKey,i=t.ctrlKey,a=t.metaKey,o=t.shiftKey,s=t.button,l=t.defaultPrevented;if(a||n||i||o)return;if(l)return;if(void 0!==s&&0!==s)return;if(r&&r.getAttribute){var c=r.getAttribute("target");if(/\b_blank\b/i.test(c))return}var u=new URL(r.href),h=u.pathname;window.location.pathname!==h&&t.preventDefault&&(t.preventDefault(),e.$router.push(h))}})},watch:{$route:function(e){this.updateMenu(e)}}}}).call(this,"/")},d6a8:function(e,t,r){"use strict";var n=r("9bd9"),i=r.n(n);i.a},db50:function(e,t,r){"use strict";var n=r("a956"),i=r.n(n);i.a},df79:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"controls"}},[e._v("\n  Filter:\n  "),r("input",{attrs:{id:"filter",title:"A javsacript expression that will evaluate to true for each data point that should be plotted.  The data point is referenced as 'd', e.g., \"d.technique == 'range'\"",placeholder:"An expression like \"d.technique == 'range'\""},domProps:{value:e.filter},on:{change:e.updateFilter}}),e._v("\n  Point:\n  "),r("input",{attrs:{id:"pointkey"},domProps:{value:e.pointkey},on:{change:e.updatePointKey}}),r("button",{attrs:{id:"plottable"},on:{click:e.plotOrTable}},[e._v(e._s(this.isTable?"Plot":"Table"))])])},i=[],a={name:"PlotControls",props:{filter:String,isTable:Boolean,pointkey:String},methods:{plotOrTable:function(){this.$emit("toggleplottable",{})},updateFilter:function(){this.$emit("filterupdate",{filter:document.querySelector("#filter").value})},updatePointKey:function(){this.$emit("pointkeyupdate",{pointkey:document.querySelector("#pointkey").value})}}},o=a,s=(r("0c87"),r("2877")),l=Object(s["a"])(o,n,i,!1,null,"272c735e",null);t["a"]=l.exports},e46e:function(e,t,r){},e87b:function(e,t,r){"use strict";var n=r("29ef"),i=r.n(n);i.a},e9ed:function(e,t,r){"use strict";var n=r("6a1d"),i=r.n(n);i.a},f43e:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"plotwithcontrols"}},[r("PlotControls",{attrs:{filter:e.currentFilter,pointkey:e.currentPoint},on:{filterupdate:e.filterUpdate,pointkeyupdate:e.pointkeyUpdate,toggleplottable:e.showTable}}),r("div",{attrs:{id:"display"}},[r("BallisticsPlot",{attrs:{plotdata:e.plotdata,filter:e.currentFilter,pointkey:e.currentPoint},on:{pickPoint:e.pickPoint}}),e.currentPoint?r("PointData",{attrs:{plotdata:e.plotdata,pointkey:e.currentPoint,references:e.references,parameters:e.parameters},on:{closetable:e.pickPoint}}):e._e()],1)],1)},i=[],a=r("5176"),o=r.n(a),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vue-plotly",{key:e.pointkey?"chartwdp":"chart",staticClass:"chart",attrs:{data:e.data,layout:e.layout,options:e.options,autoResize:!0},on:{click:e.processClick}})},l=[],c=r("a4bb"),u=r.n(c),h=(r("55dd"),r("ac6a"),r("6f23")),d=r("6e58"),p=r.n(d),f=r("43e0"),m=r.n(f),y={name:"BallisticsPlot",components:{VuePlotly:m.a},props:{plotdata:Array,filter:String,pointkey:String},data:function(){return{colors:p.a.scale.category10().range().concat(p.a.scale.category20b().range()).concat(p.a.scale.category20c().range()),layout:{margin:{l:65,t:25,r:0,b:65,pad:4},xaxis:{type:"date",title:"Date",autorange:!0},yaxis:{type:"log",title:"Power Factor (J/kg)",autorange:!0},hovermode:"closest"},options:{autosizable:!0,doubleClick:"reset",responsive:!0,scrollZoom:!0}}},computed:{data:function(){var e=this,t={},r=this.plotdata||[],n=h["c"][this.pointkey];r.forEach(function(e){return t[e.technique]=(t[e.technique]||0)+1});var i=u()(t).sort(function(e,r){return t[r]-t[e]});if(this.filter)try{var a=Function("d",'"use strict";return('+this.filter+")");r=r.filter(a)}catch(s){console.error("Filter failed: "+this.filter),console.error(s)}var o=i.map(function(t){var a=i.indexOf(t),o=r.filter(function(e){return e.technique==t}),s=e.colors[a%e.colors.length];return{data:o,x:o.map(function(e){return e.date_filled}),y:o.map(function(e){return e.power_factor}),hovertext:o.map(function(e){return"".concat(e._power_factor||e.power_factor,"<br>").concat(e.ref)}),marker:{symbol:a,size:10,color:o.map(function(e){return e===n?"#000000":s}),opacity:o.map(function(e){return e===n?1:.5})},type:o.length>100?"scattergl":"scatter",mode:"markers",hoverinfo:"text",showlegend:!0,name:t+" ("+o.length+")"}});return o}},methods:{processClick:function(e){var t=e.points[0].data.data[e.points[0].pointIndex];this.$emit("pickPoint",t)}}},g=y,_=(r("3978"),r("e87b"),r("2877")),v=Object(_["a"])(g,s,l,!1,null,"5ff92ab2",null),k=v.exports,w=r("df79"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table_wrapper"},[r("div",{staticClass:"table_scroll"},[r("router-link",{attrs:{to:{path:"references",query:{refkey:e.params.key}}},domProps:{innerHTML:e._s(this.references[e.params.key]?this.references[e.params.key].cms:"")}}),r("div",{staticClass:"table_controls"},[r("button",{attrs:{id:"full"},on:{click:e.toggleFull}},[e._v(e._s(this.showfull?"Primary Values":"All Values"))]),r("span"),r("button",{attrs:{id:"close"},on:{click:e.closeTable}},[e._v("Close")])]),r("table",e._l(Object.keys(e.params),function(t){return r("tr",{key:t},[r("td",{attrs:{title:e.parameters[t].title}},[e._v(e._s(t))]),r("td",[e._v(e._s(e.params[t]))])])}),0)],1)])},x=[],$=(r("f559"),{name:"PointData",props:{parameters:Object,plotdata:Array,pointkey:String,references:Object},data:function(){return{showfull:!1}},computed:{datapoint:function(){return this.plotdata?h["c"][this.pointkey]:null},params:function(){var e=this,t=o()({},this.datapoint),r=u()(t).filter(function(e){return!e.startsWith("_")&&"pointkey"!==e}),n={};return h["a"].forEach(function(r){void 0!==t[r.key]&&(e.showfull||r.primary)&&(n[r.key]=t["_"+r.key]||t[r.key])}),this.showfull&&(r=r.sort(),r.forEach(function(e){void 0!==t[e]&&void 0===n[e]&&(n[e]=t["_"+e]||t[e])})),n}},methods:{closeTable:function(){this.$emit("closetable")},toggleFull:function(){this.showfull=!this.showfull}}}),T=$,D=(r("5b10"),Object(_["a"])(T,b,x,!1,null,"6e3eac0a",null)),q=D.exports,P={name:"PlotWithControls",components:{BallisticsPlot:k,PlotControls:w["a"],PointData:q},props:{filter:String,parameters:Object,plotdata:Array,pointkey:String,references:Object},data:function(){return{currentFilter:this.filter,currentPoint:this.pointkey}},methods:{filterUpdate:function(e){this.currentFilter=e.filter;var t=this.$router.currentRoute;this.$router.push({path:t.path,query:o()({},t.query,{filter:e.filter})})},pickPoint:function(e){var t=e?e["key"]+"-"+e["idx"]:"";this.pointkeySet(t)},pointkeySet:function(e){this.currentPoint=e;var t=this.$router.currentRoute;this.$router.push({path:t.path,query:o()({},t.query,{pointkey:e})})},pointkeyUpdate:function(e){this.pointkeySet(e.pointkey)},showTable:function(){var e=this.$router.currentRoute;this.$router.push({path:"table",query:o()({},e.query)})}},watch:{$route:function(e){this.currentFilter=e.query.filter,this.currentPoint=e.query.pointkey}}},j=P,R=(r("16c0"),Object(_["a"])(j,n,i,!1,null,"74af7edd",null));t["a"]=R.exports},ff98:function(e,t,r){}}]);
//# sourceMappingURL=chunk-common.4b7db11d.js.map